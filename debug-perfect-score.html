<!DOCTYPE html>
<html>
<head>
    <title>Debug Perfect Score Algorithm</title>
</head>
<body>
    <h1>Debugging Perfect Score Algorithm</h1>
    <div id="debug-output"></div>
    
    <script src="maze-data.js"></script>
    <script src="algorithms.js"></script>
    <script>
        const debugOutput = document.getElementById('debug-output');
        
        function log(message) {
            console.log(message);
            debugOutput.innerHTML += message + '<br>';
        }
        
        log("üîç Debugging Perfect Score Algorithm");
        
        try {
            // Test basic maze data access
            log("Step 1: Testing maze data access...");
            const mazeConfig = getMazeConfig();
            log("‚úÖ Maze config loaded: " + JSON.stringify({
                startPos: mazeConfig.startPos,
                exitPos: mazeConfig.exitPos,
                deadEndsCount: mazeConfig.deadEnds.length
            }));
            
            // Test step 1
            log("\nStep 2: Testing Perfect Score Algorithm - Step 1");
            const step1 = MazeAlgorithms.perfectScoreAlgorithm(0, 1, {});
            log("Step 1 result: " + JSON.stringify({
                move: step1.move,
                explanation: step1.explanation.substring(0, 100),
                phase: step1.phase
            }));
            
            // Test step 2 
            log("\nStep 3: Testing Perfect Score Algorithm - Step 2");
            const step2 = MazeAlgorithms.perfectScoreAlgorithm(1, 1, step1.state);
            log("Step 2 result: " + JSON.stringify({
                move: step2.move,
                explanation: step2.explanation.substring(0, 100),
                phase: step2.phase
            }));
            
            // Test helper functions
            log("\nStep 4: Testing helper functions...");
            
            try {
                const bfsMap = MazeAlgorithms.buildBFSDistanceMap();
                log("‚úÖ BFS map built with " + bfsMap.size + " entries");
            } catch (e) {
                log("‚ùå BFS map error: " + e.message);
            }
            
            try {
                const shortestPath = MazeAlgorithms.findShortestPath(0, 8);
                log("‚úÖ Shortest path 0->8: " + JSON.stringify(shortestPath));
            } catch (e) {
                log("‚ùå Shortest path error: " + e.message);
            }
            
            try {
                const neighbors = MazeAlgorithms.getValidNeighbors(0);
                log("‚úÖ Valid neighbors for 0: " + JSON.stringify(neighbors));
            } catch (e) {
                log("‚ùå Valid neighbors error: " + e.message);
            }
            
        } catch (error) {
            log("‚ùå Critical error: " + error.message);
            log("Stack: " + error.stack);
        }
    </script>
</body>
</html>